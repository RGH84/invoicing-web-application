<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>remove_customer</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
  </head>
  <body>
    <h1>Asiakkaan poistaminen</h1>
    {% if session.user_id %}
    <p>Sivustot ovat vielä kehitteillä.</p>
    <p>Täällä voit voit poistaa asiakkaan!</p>
    <p>Olet kirjautunut sisään nimellä {{ session.username }}.</p>
    <hr>
    <form action="/remove_customer" method="post" onsubmit="return check(this);">
    <p>Anna poistettavan asiakkaan ID: <input type="number" name="ID"></p>
    <p><input type="submit" value="Poista asiakas"></p>
    <p><input type="hidden" name="csrf_token" value="{{ csrf_token }}"></p>
    </form>
    <script>
      var customerId = {{ customers_id | tojson }};
      function check(form) {
          if (form.ID.value.trim() === "") {
              alert("Anna ID numero");
              return false;
          }
          if (!customerId.includes(Number(form.ID.value))) {
              alert("Asiakasta ei löydy listalta");
              return false;
          }
          alert("Asiakkaan poisto pitäisi onnistua näillä tiedoilla, saat erillisen virheviestin, jos se ei onnistunutkaan!");
          return true;
      }
  </script>
    <p>Jos haluat siirtyä etusivulle, siirry tästä:</p>
    <nav><a href="/">Etusivulle</a></nav> 
    {% else %}
    <h1>Tervetuloa JK laskutussovellukseen!</h1>
    <p>Sinulla ei ole oikeutta tälle sivulle, kirjaudu sisään tai luo uusi käyttäjätunnus.</p>
    <a href="/login">Kirjaudu sisään tästä</a>
    <a href="/register">Luo uusi tunnus tästä</a>
    {% endif %}
  </body> 
</html> 

